import{w as S,a as d}from"../global/global.BK22j_qP.js";import{g as X,r as H}from"../@babel/@babel.CFC6K8TQ.js";import{i as O}from"../is-function/is-function.Bs8j6Gmq.js";import{U as z}from"../url-toolkit/url-toolkit.CkFjG-fe.js";var M={exports:{}};function j(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=$(e))||r){t&&(e=t);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(e,r){if(e){if(typeof e=="string")return x(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,r)}}function x(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var k=function(){function e(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var r=e.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},r.addInterceptor=function(a,s){this.typeToInterceptorsMap_.has(a)||this.typeToInterceptorsMap_.set(a,new Set);var i=this.typeToInterceptorsMap_.get(a);return i.has(s)?!1:(i.add(s),!0)},r.removeInterceptor=function(a,s){var i=this.typeToInterceptorsMap_.get(a);return i&&i.has(s)?(i.delete(s),!0):!1},r.clearInterceptorsByType=function(a){var s=this.typeToInterceptorsMap_.get(a);return s?(this.typeToInterceptorsMap_.delete(a),this.typeToInterceptorsMap_.set(a,new Set),!0):!1},r.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},r.getForType=function(a){return this.typeToInterceptorsMap_.get(a)||new Set},r.execute=function(a,s){for(var i=this.getForType(a),u=j(i),l;!(l=u()).done;){var h=l.value;try{s=h(s)}catch{}}return s},e}(),G=k,N=function(){function e(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var r=e.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},r.getMaxAttempts=function(){return this.maxAttempts_},r.setMaxAttempts=function(a){this.maxAttempts_=a},r.getDelayFactor=function(){return this.delayFactor_},r.setDelayFactor=function(a){this.delayFactor_=a},r.getFuzzFactor=function(){return this.fuzzFactor_},r.setFuzzFactor=function(a){this.fuzzFactor_=a},r.getInitialDelay=function(){return this.initialDelay_},r.setInitialDelay=function(a){this.initialDelay_=a},r.createRetry=function(a){var s=a===void 0?{}:a,i=s.maxAttempts,u=s.delayFactor,l=s.fuzzFactor,h=s.initialDelay;return new U({maxAttempts:i||this.maxAttempts_,delayFactor:u||this.delayFactor_,fuzzFactor:l||this.fuzzFactor_,initialDelay:h||this.initialDelay_})},e}(),U=function(){function e(t){this.maxAttempts_=t.maxAttempts,this.delayFactor_=t.delayFactor,this.fuzzFactor_=t.fuzzFactor,this.currentDelay_=t.initialDelay,this.currentAttempt_=1}var r=e.prototype;return r.moveToNextAttempt=function(){this.currentAttempt_++;var a=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+a},r.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},r.getCurrentDelay=function(){return this.currentDelay_},r.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},r.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},r.getCurrentFuzzedDelay=function(){var a=this.getCurrentMinPossibleDelay(),s=this.getCurrentMaxPossibleDelay();return a+Math.random()*(s-a)},e}(),J=N,P=S,V=function(r,t){return t===void 0&&(t=!1),function(a,s,i){if(a){r(a);return}if(s.statusCode>=400&&s.statusCode<=599){var u=i;if(t)if(P.TextDecoder){var l=B(s.headers&&s.headers["content-type"]);try{u=new TextDecoder(l).decode(i)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(i));r({cause:u});return}r(null,i)}};function B(e){return e===void 0&&(e=""),e.toLowerCase().split(";").reduce(function(r,t){var a=t.split("="),s=a[0],i=a[1];return s.trim()==="charset"?i.trim():r},"utf-8")}var Q=V,C=S,W=H,Y=O,L=G,Z=J;o.httpHandler=Q;o.requestInterceptorsStorage=new L;o.responseInterceptorsStorage=new L;o.retryManager=new Z;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bj√∂rklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var K=function(r){var t={};return r&&r.trim().split(`
`).forEach(function(a){var s=a.indexOf(":"),i=a.slice(0,s).trim().toLowerCase(),u=a.slice(s+1).trim();typeof t[i]>"u"?t[i]=u:Array.isArray(t[i])?t[i].push(u):t[i]=[t[i],u]}),t};M.exports=o;M.exports.default=o;o.XMLHttpRequest=C.XMLHttpRequest||ae;o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:C.XDomainRequest;ee(["get","put","post","patch","head","delete"],function(e){o[e==="delete"?"del":e]=function(r,t,a){return t=q(r,t,a),t.method=e.toUpperCase(),A(t)}});function ee(e,r){for(var t=0;t<e.length;t++)r(e[t])}function te(e){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0}function q(e,r,t){var a=e;return Y(r)?(t=r,typeof e=="string"&&(a={uri:e})):a=W({},r,{uri:e}),a.callback=t,a}function o(e,r,t){return r=q(e,r,t),A(r)}function A(e){if(typeof e.callback>"u")throw new Error("callback argument missing");if(e.requestType&&o.requestInterceptorsStorage.getIsEnabled()){var r={uri:e.uri||e.url,headers:e.headers||{},body:e.body,metadata:e.metadata||{},retry:e.retry,timeout:e.timeout},t=o.requestInterceptorsStorage.execute(e.requestType,r);e.uri=t.uri,e.headers=t.headers,e.body=t.body,e.metadata=t.metadata,e.retry=t.retry,e.timeout=t.timeout}var a=!1,s=function(f,p,F){a||(a=!0,e.callback(f,p,F))};function i(){n.readyState===4&&!o.responseInterceptorsStorage.getIsEnabled()&&setTimeout(h,0)}function u(){var c=void 0;if(n.response?c=n.response:c=n.responseText||re(n),w)try{c=JSON.parse(c)}catch{}return c}function l(c){if(clearTimeout(D),clearTimeout(e.retryTimeout),c instanceof Error||(c=new Error(""+(c||"Unknown XMLHttpRequest Error"))),c.statusCode=0,!v&&o.retryManager.getIsEnabled()&&e.retry&&e.retry.shouldRetry()){e.retryTimeout=setTimeout(function(){e.retry.moveToNextAttempt(),e.xhr=n,A(e)},e.retry.getCurrentFuzzedDelay());return}if(e.requestType&&o.responseInterceptorsStorage.getIsEnabled()){var f={headers:m.headers||{},body:m.body,responseUrl:n.responseURL,responseType:n.responseType},p=o.responseInterceptorsStorage.execute(e.requestType,f);m.body=p.body,m.headers=p.headers}return s(c,m)}function h(){if(!v){var c;clearTimeout(D),clearTimeout(e.retryTimeout),e.useXDR&&n.status===void 0?c=200:c=n.status===1223?204:n.status;var f=m,p=null;if(c!==0?(f={body:u(),statusCode:c,method:g,headers:{},url:_,rawRequest:n},n.getAllResponseHeaders&&(f.headers=K(n.getAllResponseHeaders()))):p=new Error("Internal XMLHttpRequest Error"),e.requestType&&o.responseInterceptorsStorage.getIsEnabled()){var F={headers:f.headers||{},body:f.body,responseUrl:n.responseURL,responseType:n.responseType},R=o.responseInterceptorsStorage.execute(e.requestType,F);f.body=R.body,f.headers=R.headers}return s(p,f,f.body)}}var n=e.xhr||null;n||(e.cors||e.useXDR?n=new o.XDomainRequest:n=new o.XMLHttpRequest);var b,v,_=n.url=e.uri||e.url,g=n.method=e.method||"GET",T=e.body||e.data,y=n.headers=e.headers||{},I=!!e.sync,w=!1,D,m={body:void 0,headers:{},statusCode:0,method:g,url:_,rawRequest:n};if("json"in e&&e.json!==!1&&(w=!0,y.accept||y.Accept||(y.Accept="application/json"),g!=="GET"&&g!=="HEAD"&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),T=JSON.stringify(e.json===!0?T:e.json))),n.onreadystatechange=i,n.onload=h,n.onerror=l,n.onprogress=function(){},n.onabort=function(){v=!0,clearTimeout(e.retryTimeout)},n.ontimeout=l,n.open(g,_,!I,e.username,e.password),I||(n.withCredentials=!!e.withCredentials),!I&&e.timeout>0&&(D=setTimeout(function(){if(!v){v=!0,n.abort("timeout");var c=new Error("XMLHttpRequest timeout");c.code="ETIMEDOUT",l(c)}},e.timeout)),n.setRequestHeader)for(b in y)y.hasOwnProperty(b)&&n.setRequestHeader(b,y[b]);else if(e.headers&&!te(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(n.responseType=e.responseType),"beforeSend"in e&&typeof e.beforeSend=="function"&&e.beforeSend(n),n.send(T||null),n}function re(e){try{if(e.responseType==="document")return e.responseXML;var r=e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!r)return e.responseXML}catch{}return null}function ae(){}var ne=M.exports;const fe=X(ne);var E="http://example.com",le=function(r,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(r)&&(r=d.location&&d.location.href||"");var a=typeof d.URL=="function",s=/^\/\//.test(r),i=!d.location&&!/\/\//i.test(r);if(a?r=new d.URL(r,d.location||E):/\/\//i.test(r)||(r=z.buildAbsoluteURL(d.location&&d.location.href||"",r)),a){var u=new URL(t,r);return i?u.href.slice(E.length):s?u.href.slice(u.protocol.length):u.href}return z.buildAbsoluteURL(r,t)},de=function(r,t,a){t.forEach(function(s){for(var i in r.mediaGroups[s])for(var u in r.mediaGroups[s][i]){var l=r.mediaGroups[s][i][u];a(l,s,i,u)}})},se=function(r){return d.atob?d.atob(r):Buffer.from(r,"base64").toString("binary")};function ye(e){for(var r=se(e),t=new Uint8Array(r.length),a=0;a<r.length;a++)t[a]=r.charCodeAt(a);return t}export{fe as X,ye as d,de as f,le as r};
